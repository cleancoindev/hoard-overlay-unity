<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Unity Overlay Toolkit: ~_com.unity.test-framework Unity Test Runner</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Unity Overlay Toolkit
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">~_com.unity.test-framework <a class="el" href="../../d1/d88/namespaceUnity.html">Unity</a> Test Runner </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The <a class="el" href="../../d1/d88/namespaceUnity.html">Unity</a> Test Runner is a tool that tests your code in both <b>Edit</b> mode and <b>Play</b> mode, and also on target platforms such as <a href="https://docs.unity3d.com/Manual/Standalone.html">Standalone</a>, Android, or iOS.</p>
<p>To access the <a class="el" href="../../d1/d88/namespaceUnity.html">Unity</a> Test Runner, go to <b>Window</b> &gt; <b>Test Runner</b>.</p>
<div class="image">
<img src="../../UnityTestRunner-0.png"/>
</div>
<p>The <a class="el" href="../../d1/d88/namespaceUnity.html">Unity</a> Test Runner uses a <a class="el" href="../../d1/d88/namespaceUnity.html">Unity</a> integration of the NUnit library, which is an open-source unit testing library for .Net languages. For more information about NUnit, see the <a href="http://www.nunit.org/">official NUnit website</a> and the <a href="https://github.com/nunit/docs/wiki/NUnit-Documentation">NUnit documentation on GitHub</a>.</p>
<p><a href="https://docs.unity3d.com/ScriptReference/TestTools.UnityTestAttribute.html">UnityTestAttribute</a> is the main addition to the standard NUnit library for the <a class="el" href="../../d1/d88/namespaceUnity.html">Unity</a> Test Runner. This is a type of unit test that allows you to skip a frame from within a test (which allows background tasks to finish). To use <code>UnityTestAttribute</code>:</p>
<ul>
<li>In <b>Play</b> mode: Execute <code>UnityTestAttribute</code> as a <a href="https://docs.unity3d.com/ScriptReference/Coroutine.html">coroutine</a>.</li>
<li>In <b>Edit</b> mode: Execute <code>UnityTestAttribute</code> in the <a href="https://docs.unity3d.com/ScriptReference/EditorApplication-update.html">EditorApplication.update</a> callback loop.</li>
</ul>
<h2>Known issues and limitations</h2>
<p>There are some known issues and limitations of the <a class="el" href="../../d1/d88/namespaceUnity.html">Unity</a> Test Runner:</p>
<ul>
<li>The WebGL and WSA platforms do not support <code>UnityTestAttribute</code>.</li>
<li><code>UnityTest</code> does not support <a href="https://github.com/nunit/docs/wiki/Parameterized-Tests">Parameterized tests</a> (except for <code>ValueSource</code>).</li>
</ul>
<h2>How to use <a class="el" href="../../d1/d88/namespaceUnity.html">Unity</a> Test Runner</h2>
<p>This page assumes you already have an understanding of unit testing and NUnit. If you are new to NUnit or would like more information, see to the <a href="https://github.com/nunit/docs/wiki/NUnit-Documentation">NUnit documentation on GitHub</a>.</p>
<p>To open the <a class="el" href="../../d1/d88/namespaceUnity.html">Unity</a> Test Runner, open <a class="el" href="../../d1/d88/namespaceUnity.html">Unity</a> and go to <b>Window</b> &gt; <b>Test Runner</b>. If there are no tests in your Project, click the <b>Create Test Script in current folder</b> button to create a basic test script. This button is greyed out if adding a test script would result in a compilation error. The conditions for adding a test script are in the <a href="https://docs.unity3d.com/Manual/SpecialFolders.html">Editor</a> folder, or any folders using Assembly Definition files that reference test assemblies (NUnit, <a class="el" href="../../d1/d88/namespaceUnity.html">Unity</a> Test Runner, and user script assemblies).</p>
<div class="image">
<img src="../../UnityTestRunner-1.png"/>
</div>
<p>You can also create test scripts by navigating to <b>Assets</b> &gt; <b>Create</b> &gt; <b>C# Test Script</b>. This option is disabled if adding a test script would result in a compilation error.</p>
<p><b>Note:</b> <a class="el" href="../../d1/d88/namespaceUnity.html">Unity</a> does not include test assemblies (NUnit, <a class="el" href="../../d1/d88/namespaceUnity.html">Unity</a> TestRunner, and user script assemblies) when using the normal build pipeline, but does include them when using "Run on &amp;lt;Platform&amp;gt;" in the Test Runner Window.</p>
<h3>Testing in Edit mode</h3>
<p>In <b>Edit</b> mode, <a class="el" href="../../d1/d88/namespaceUnity.html">Unity</a> runs tests from the Test Runner window.</p>
<p>Edit mode test scripts are defined by the file location you place them in. Valid locations:</p>
<ul>
<li>Project <a href="https://docs.unity3d.com/Manual/SpecialFolders.html">Editor</a> folder</li>
<li>Assembly Definition file that references test assemblies that are Editor-only</li>
<li>Precompiled assemblies that are in the Project’s <a href="https://docs.unity3d.com/Manual/SpecialFolders.html">Editor</a> folder</li>
</ul>
<p>Click the <b>EditMode</b> button, then click <b>Create Test Script in current folder</b> to create a basic test script. Open and edit this in your preferred script editing software as required.</p>
<p>Note: When running in <b>Edit</b> mode, execute <a href="https://docs.unity3d.com/ScriptReference/TestTools.UnityTestAttribute.html">UnityTestAttribute</a> in the <a href="https://docs.unity3d.com/ScriptReference/EditorApplication-update.html">EditorApplication.update</a> callback loop.</p>
<h3>Testing in Play mode</h3>
<p>You need to place Play mode test scripts in a folder that an Assembly Definition file includes. The Assembly Definition file needs to reference test assemblies (Nunit and <a class="el" href="../../d1/d88/namespaceUnity.html">Unity</a> TestRunner). Pre-defined <a class="el" href="../../d1/d88/namespaceUnity.html">Unity</a> assemblies (such as <em>Assembly-CSharp.dll</em>) do not reference the defined assembly. This Assembly Definition file also needs to reference the assembly you want to test. This means that it’s only possible to test code defined by other Assembly Definition files.</p>
<p><a class="el" href="../../d1/d88/namespaceUnity.html">Unity</a> does not include test assemblies in normal player builds; only when running through the Test Runner. If you need to test code in pre-defined assemblies, you can reference test assemblies from all the assemblies. However, you must manually remove these tests afterwards, so that <a class="el" href="../../d1/d88/namespaceUnity.html">Unity</a> does not add them to the final player build.</p>
<p>To do this:</p>
<ol type="1">
<li>Save your project.</li>
<li>Go to <b>Window</b> &gt; <b>Test Runner.</b></li>
<li>Click the small drop-down menu in the top-right of the window.</li>
<li>Click <b>Enable playmode tests for all assemblies</b>.</li>
<li>In the dialog box appears, click <b>OK</b> to manually restart the Editor.</li>
</ol>
<div class="image">
<img src="../../UnityTestRunner-2.png"/>
</div>
<p><b>Note:</b> Enabling <b>PlayMode</b> tests for all assemblies includes additional assemblies in your Project’s build, which can increase your Project’s size as well as build time.</p>
<p>To create <b>PlayMode</b> test scripts, select <b>PlayMode</b> in the Test Runner window and click <b>Create Test Script in current folder</b>. This button is greyed out if adding the script would result in a compilation error.</p>
<p><b>Note</b>: Execute <a href="https://docs.unity3d.com/ScriptReference/TestTools.UnityTestAttribute.html">UnityTestAttribute</a> as a <a href="https://docs.unity3d.com/ScriptReference/Coroutine.html">coroutine</a> when running in <b>Play</b> mode.</p>
<p>The <a class="el" href="../../d1/d88/namespaceUnity.html">Unity</a> Test Runner tests your code in <b>Edit</b> mode and <b>Play</b> mode, as well as on target platforms such as Standalone, Android, or iOS.</p>
<p>The documentation on this page discusses writing and executing tests in the the <a class="el" href="../../d1/d88/namespaceUnity.html">Unity</a> Test Runner, and assumes you understand both <a href="https://docs.unity3d.com/Manual/CreatingAndUsingScripts.html">scripting</a> and the Unity Test Runner.</p>
<p><a class="el" href="../../d1/d88/namespaceUnity.html">Unity</a> delivers test results in an XML format. For more information, see the <a href="https://github.com/nunit/docs/wiki/Test-Result-XML-Format">NUnit documentation on XML format test results</a>.</p>
<h2>UnityTestAttribute</h2>
<p><a href="https://docs.unity3d.com/ScriptReference/TestTools.UnityTestAttribute.html">UnityTestAttribute</a> requires you to return <code>IEnumerator</code>. In <b>Play</b> mode, execute the test as a <a href="https://docs.unity3d.com/ScriptReference/Coroutine.html">coroutine</a>. In <b>Edit</b> mode, you can yield <code>null</code> from the test, which skips the current frame.</p>
<p><b>Note:</b> The WebGL and WSA platforms do not support <code>UnityTestAttribute</code>.</p>
<h3>Regular NUnit test (works in Edit mode and Play mode)</h3>
<div class="fragment"><div class="line">[Test]</div><div class="line">public void GameObject_CreatedWithGiven_WillHaveTheName()</div><div class="line">{</div><div class="line">    var go = new GameObject(&quot;MyGameObject&quot;);</div><div class="line">    Assert.AreEqual(&quot;MyGameObject&quot;, go.name);</div><div class="line">}</div></div><!-- fragment --><h3>Example in Play mode</h3>
<div class="fragment"><div class="line">[UnityTest]</div><div class="line">public IEnumerator GameObject_WithRigidBody_WillBeAffectedByPhysics()</div><div class="line">{</div><div class="line">    var go = new GameObject();</div><div class="line">    go.AddComponent&lt;Rigidbody&gt;();</div><div class="line">    var originalPosition = go.transform.position.y;</div><div class="line"></div><div class="line">    yield return new WaitForFixedUpdate();</div><div class="line"></div><div class="line">    Assert.AreNotEqual(originalPosition, go.transform.position.y);</div><div class="line">}</div></div><!-- fragment --><h3>Example in Edit mode:</h3>
<div class="fragment"><div class="line">[UnityTest]</div><div class="line">public IEnumerator EditorUtility_WhenExecuted_ReturnsSuccess()</div><div class="line">{</div><div class="line">    var utility = RunEditorUtilityInTheBackgroud();</div><div class="line"></div><div class="line">    while (utility.isRunning)</div><div class="line">    {</div><div class="line">        yield return null;</div><div class="line">    }</div><div class="line"></div><div class="line">    Assert.IsTrue(utility.isSuccess);</div><div class="line">}</div></div><!-- fragment --><h2>UnityPlatformAttribute</h2>
<p>Use <a href="https://docs.unity3d.com/ScriptReference/TestTools.UnityPlatformAttribute.html">UnityPlatformAttribute</a> to filter tests based on the the executing platform. It behaves like the <a href="http://nunit.org/docs/2.5/platform.html">NUnit</a><a href="http://nunit.org/docs/2.5/platform.html">PlatformAttribute</a>.</p>
<div class="fragment"><div class="line">[Test]</div><div class="line">[UnityPlatform (RuntimePlatform.WindowsPlayer)]</div><div class="line">public void TestMethod1()</div><div class="line">{</div><div class="line">   Assert.AreEqual(Application.platform, RuntimePlatform.WindowsPlayer);</div><div class="line">}</div><div class="line"></div><div class="line">[Test]</div><div class="line">[UnityPlatform(exclude = new[] {RuntimePlatform.WindowsEditor })]</div><div class="line">public void TestMethod2()</div><div class="line">{</div><div class="line">   Assert.AreNotEqual(Application.platform, RuntimePlatform.WindowsEditor);</div><div class="line">}</div></div><!-- fragment --><p>To only execute Editor tests on a given platform, you can also use <code>UnityPlatform</code> .</p>
<h3>PrebuildSetupAttriubte</h3>
<p>Use <a href="https://docs.unity3d.com/ScriptReference/TestTools.PrebuildSetupAttribute.html">PrebuildSetupAttribute</a> if you need to perform any extra set-up before the test starts. To do this, specify the class type that implements the <a href="https://docs.unity3d.com/ScriptReference/TestTools.IPrebuildSetup.html">IPrebuildSetup</a> interface. If you need to run the set-up code for the whole class (for example, if you want to execute some code before the test starts, such as Asset preparation or set-up required for a specific test), implement the <code>IPrebuildSetup</code> interface in the class for tests.</p>
<div class="fragment"><div class="line">public class TestsWithPrebuildStep : IPrebuildSetup</div><div class="line">{</div><div class="line">    public void Setup()</div><div class="line">    {</div><div class="line">        // Run this code before the tests are executed</div><div class="line">    }</div><div class="line"></div><div class="line">    [Test]</div><div class="line">    //PrebuildSetupAttribute can be skipped because it&#39;s implemented in the same class</div><div class="line">    [PrebuildSetup(typeof(TestsWithPrebuildStep))]</div><div class="line">    public void Test()</div><div class="line">    {</div><div class="line">        (...)</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p>Execute the <code>IPrebuildSetup</code> code before entering Play mode or building a player. Setup can use <a class="el" href="../../d3/dd4/namespaceUnityEditor.html">UnityEditor</a> namespace and its function, but to avoid compilation errors, you must place it either in the <em>Editor</em> folder, or guard it with the <code>#if UNITY_EDITOR</code> directive.</p>
<h2>LogAssert</h2>
<p>A test fails if <a class="el" href="../../d1/d88/namespaceUnity.html">Unity</a> logs a message other than a regular log or warning message. Use the <a href="https://docs.unity3d.com/ScriptReference/TestTools.LogAssert.html">LogAssert</a> class to make a message expected in the log, so that the test does not fail when <a class="el" href="../../d1/d88/namespaceUnity.html">Unity</a> logs that message.</p>
<p>A test also reports as failed if an expected message does not appear, or if <a class="el" href="../../d1/d88/namespaceUnity.html">Unity</a> does not log any regular log or warning messages.</p>
<h3>Example</h3>
<div class="fragment"><div class="line">[Test]</div><div class="line">public void LogAssertExample()</div><div class="line">{</div><div class="line">    //Expect a regular log message</div><div class="line">    LogAssert.Expect(LogType.Log, &quot;Log message&quot;);</div><div class="line">    //A log message is expected so without the following line</div><div class="line">    //the test would fail</div><div class="line">    Debug.Log(&quot;Log message&quot;);</div><div class="line">    //An error log is printed</div><div class="line">    Debug.LogError(&quot;Error message&quot;);</div><div class="line">    //Without expecting an error log, the test would fail</div><div class="line">    LogAssert.Expect(LogType.Error, &quot;Error message&quot;);</div><div class="line">}</div></div><!-- fragment --><h2>MonoBehaviourTest</h2>
<p><a href="https://docs.unity3d.com/ScriptReference/TestTools.MonoBehaviourTest_1.html">MonoBehaviourTest</a> is a <a href="https://docs.unity3d.com/ScriptReference/Coroutine.html">coroutine</a>, and a helper for writing <a href="https://docs.unity3d.com/ScriptReference/MonoBehaviour.html">MonoBehaviour</a> tests. Yield <code>MonoBehaviourTest</code> from the <a href="https://docs.unity3d.com/ScriptReference/TestTools.UnityTestAttribute.html">UnityTest</a> attribute to instantiate the specified MonoBehaviour and wait for it to finish executing. Implement the <a href="https://docs.unity3d.com/ScriptReference/TestTools.IMonoBehaviourTest.html">IMonoBehaviourTest</a> interface to indicate when the test is done.</p>
<h3>Example</h3>
<div class="fragment"><div class="line">[UnityTest]</div><div class="line">public IEnumerator MonoBehaviourTest_Works()</div><div class="line">{</div><div class="line">    yield return new MonoBehaviourTest&lt;MyMonoBehaviourTest&gt;();</div><div class="line">}</div><div class="line"></div><div class="line">public class MyMonoBehaviourTest : MonoBehaviour, IMonoBehaviourTest</div><div class="line">{</div><div class="line">    private int frameCount;</div><div class="line">    public bool IsTestFinished</div><div class="line">    {</div><div class="line">        get { return frameCount &gt; 10; }</div><div class="line">    }</div><div class="line"></div><div class="line">     void Update()</div><div class="line">     {</div><div class="line">        frameCount++;</div><div class="line">     }</div><div class="line">}</div></div><!-- fragment --><h2>Running tests on platforms</h2>
<p>In <b>Play</b> mode, you can run tests on specific platforms. The target platform is always the current Platform selected in <a href="https://docs.unity3d.com/Manual/BuildSettings.html">Build Settings</a> (menu: <b>File</b> &gt; <b>Build Settings</b>). Click <b>Run all in the player</b> to build and run your tests on the currently active target platform.</p>
<p>Note that your current platform displays in brackets on the button. For example, in the screenshot below, the button reads <b>Run all in player (StandaloneWindows)</b>, because the current platform is Windows.</p>
<div class="image">
<img src="../../UnityTestRunner-3.png"/>
</div>
<p>The test results display in the build once the test is complete.</p>
<div class="image">
<img src="../../UnityTestRunner-4.png"/>
</div>
<p>To get the test results from the platform to the Editor running the test, both need to be on same network. The application running on the platform reports back the test results, displays the tests executed, and shuts down.</p>
<p>Note that some platforms do not support shutting down the application with <a href="https://docs.unity3d.com/ScriptReference/Application.Quit.html">Application.Quit</a>. These continue running after reporting test results.</p>
<p>If <a class="el" href="../../d1/d88/namespaceUnity.html">Unity</a> cannot instantiate the connection, you can visually see the tests succeed in the running application. Note that running tests on platforms with arguments, in this state, does not provide XML test results.</p>
<h2>Running from the command line</h2>
<p>To do this, run <a class="el" href="../../d1/d88/namespaceUnity.html">Unity</a> with the following <a href="https://docs.unity3d.com/Manual/CommandLineArguments.html">command line arguments</a>:</p>
<ul>
<li><code>runTest</code> - Executes tests in the Project.</li>
<li><code>testPlatform</code> - The platform you want to run tests on.<ul>
<li>Available platforms:<ul>
<li><code>playmode</code> and <code>editmode</code>. Note that If unspecified, tests run in <code>editmode</code> by default.</li>
<li>Platform/Type convention is from the <a href="https://docs.unity3d.com/ScriptReference/BuildTarget.html">BuildTarget</a> enum. The tested and official supported platforms:<ul>
<li><a href="https://docs.unity3d.com/ScriptReference/BuildTarget.StandaloneWindows.html">StandaloneWindows</a></li>
<li><a href="https://docs.unity3d.com/ScriptReference/BuildTarget.StandaloneWindows64.html">StandaloneWindows64</a></li>
<li><a href="https://docs.unity3d.com/ScriptReference/BuildTarget.StandaloneOSXIntel.html">StandaloneOSXIntel</a></li>
<li><a href="https://docs.unity3d.com/ScriptReference/BuildTarget.StandaloneOSXIntel64.html">StandaloneOSXIntel64</a></li>
<li><a href="https://docs.unity3d.com/ScriptReference/BuildTarget.iOS.html">iOS</a></li>
<li><a href="https://docs.unity3d.com/ScriptReference/BuildTarget.tvOS.html">tvOS</a></li>
<li><a href="https://docs.unity3d.com/ScriptReference/BuildTarget.Android.html">Android</a></li>
<li><a href="https://docs.unity3d.com/ScriptReference/BuildTarget.PS4.html">PS4</a></li>
<li><a href="https://docs.unity3d.com/ScriptReference/BuildTarget.XboxOne.html">XboxOne</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><code>testResults</code> - The path indicating where <a class="el" href="../../d1/d88/namespaceUnity.html">Unity</a> should save the result file. By default, <a class="el" href="../../d1/d88/namespaceUnity.html">Unity</a> saves it in the Project’s root folder.</li>
</ul>
<h3>Example</h3>
<p>The following example shows a command line argument on Windows. The specific line may differ depending on your operating system.</p>
<div class="fragment"><div class="line">&gt;Unity.exe -runTests -projectPath PATH_TO_YOUR_PROJECT -testResults C:\temp\results.xml -testPlatform editmode</div></div><!-- fragment --><p><b>Tip:</b> On Windows, in order to read the result code of the executed command, run the following:</p>
<p><code>start /WAIT Unity.exe ARGUMENT_LIST</code>.</p>
<h2>Comparison utilities</h2>
<p>The <a href="https://docs.unity3d.com/ScriptReference/TestTools.Utils.Utils.html">UnityEngine.TestTools.Utils</a> namespace contains utility classes to compare <a href="https://docs.unity3d.com/ScriptReference/Vector2.html">Vector2</a>, <a href="https://docs.unity3d.com/ScriptReference/Vector3.html">Vector3</a>, <a href="https://docs.unity3d.com/ScriptReference/Vector4.html">Vector4</a>, <a href="https://docs.unity3d.com/ScriptReference/Quaternion.html">Quaternion</a>, <a href="https://docs.unity3d.com/ScriptReference/Color.html">Color</a> and <code>float</code> types using NUnit constraints. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
